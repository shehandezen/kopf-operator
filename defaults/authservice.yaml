spec:
  replicas: 1
  container:
    name: "{{ name }}"
    image: shehandezen/cneura-auth:latest
    ports:
      - containerPort: 8484
    env:
      - name: DB_NAME
        value: "auth"
      - name: MONGO_URI
        valueFrom:
          secretKeyRef:
            name: "{{ name }}-secrets"
            key: mongo-url
    resources:
      limits:
        memory: "512Gi"
        cpu: "500m"
      requests:
        memory: "512Mi"
        cpu: "250m"
    readinessProbe:
      tcpSocket:
        port: 8484
      failureThreshold: 6
      initialDelaySeconds: 40
      timeoutSeconds: 30
      periodSeconds: 60
    livenessProbe:
      tcpSocket:
        port: 8484
      failureThreshold: 5
      initialDelaySeconds: 60
      timeoutSeconds: 30
      periodSeconds: 20
  service:
    selector:
      app: "{{ name }}"
    ports:
      - port: 8484
        targetPort: 8484
        protocol: TCP
    type: ClusterIP
  