name: my-app
namespace: default

replicas: 2

container:
  name: my-app
  image: my-app:latest
  ports:
    - containerPort: 8080
  env:
    - name: ENVIRONMENT
      value: production
  volumeMounts:
    - name: app-data
      mountPath: /data
  resources:
    limits:
      cpu: "500m"
      memory: "256Mi"
    requests:
      cpu: "250m"
      memory: "128Mi"
  livenessProbe:
    httpGet:
      path: /healthz
      port: 8080
    initialDelaySeconds: 5
    periodSeconds: 10
  readinessProbe:
    httpGet:
      path: /ready
      port: 8080
    initialDelaySeconds: 5
    periodSeconds: 10

  volumes:
    - name: app-data
      emptyDir: {}

service:
  selector:
    app: my-app
  ports:
    - port: 80
      targetPort: 8080
  type: ClusterIP

configmap:
  data:
    APP_ENV: production
    LOG_LEVEL: info

secret:
  data:
    DB_PASSWORD: my-secret-password
  type: Opaque

pvc:
  accessModes: ["ReadWriteOnce"]
  resources:
    requests:
      storage: 1Gi

ingress:
  host: my-app.local
  paths:
    - path: /
      pathType: Prefix
      backend:
        service:
          name: my-app
          port:
            number: 80

hpa:
  minReplicas: 2
  maxReplicas: 5
  cpuUtilization: 60
